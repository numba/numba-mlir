package:
    name: numba-mlir
    version: {{ GIT_DESCRIBE_TAG }}

source:
    path: ../..

build:
    number: {{ GIT_DESCRIBE_NUMBER }}
    script_env:
        - TBB_PATH
        - LLVM_PATH
        - LEVEL_ZERO_DIR
        - LEVEL_ZERO_VERSION_CHECK_OFF
        - NUMBA_MLIR_USE_SYCL

requirements:
    build:
        - {{ compiler('cxx') }}
        - {{ compiler('dpcpp') }}  >=2023.0  # [not osx]
        - python
        - ninja
        - cmake
        - pybind11
        - mkl-devel >=2023.0
        - mkl-devel-dpcpp >=2023.0
        - setuptools
        - zlib
    host:
        - python
        - mkl-devel >=2022.2
        - mkl-devel-dpcpp >=2022.2
        - setuptools
        - numba 0.56*
        - zlib
    run:
        - python
        - numba 0.56*
        - packaging
        - mkl >=2023.0
        - mkl-dpcpp >=2023.0
        - tbb >=2021.6.0

test:
    requires:
        - pytest
